<?php
// –î–ê–ù–ù–´–ï –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ö –ë–ê–ó–ï
$host = 'localhost';
$port = '3306';
$dbname = 'bd';
$username = 'haibaneden';
$password = 'Stilesmile1';
$charset = 'utf8mb4';

// –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
try {
    $dsn = "mysql:host=$host;port=$port;dbname=$dbname;charset=$charset";
    $pdo = new PDO($dsn, $username, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    echo "‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ —É—Å–ø–µ—à–Ω–æ<br>";
} catch(PDOException $e) {
    die("‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: " . $e->getMessage());
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö
function loadSampleData($pdo) {
    echo "üì• –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±—Ä–∞–∑—Ü—ã –¥–∞–Ω–Ω—ã—Ö —Ä–µ–µ—Å—Ç—Ä–∞ –ú–∏–Ω–ø—Ä–æ–º—Ç–æ—Ä–≥–∞...<br>";
    
    // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
    $pdo->exec("DELETE FROM registry_entries");
    echo "üóëÔ∏è –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã<br>";
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±—Ä–∞–∑—Ü—ã –¥–∞–Ω–Ω—ã—Ö
    $sampleData = [
        ['01.001.00.001-2024', '–û–û–û "–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"', '–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º –ê–°–£–ü-2024', '–≥. –ú–æ—Å–∫–≤–∞', '2024-03-15', 'active'],
        ['02.015.00.087-2024', '–ê–û "–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"', '–ú–∏–∫—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å–µ—Ä–∏–∏ –ú–ö-2000 –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏', '–≥. –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '2024-02-22', 'active'],
        ['03.042.00.156-2024', '–û–û–û "–ú–∞—à–∏–Ω–æ–°—Ç—Ä–æ–π"', '–¢–æ–∫–∞—Ä–Ω—ã–µ —Å—Ç–∞–Ω–∫–∏ —Å —á–∏—Å–ª–æ–≤—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ –¢–°-500', '–≥. –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', '2024-01-08', 'suspended'],
        ['04.007.00.203-2023', '–ü–ê–û "–¢–µ—Ö–Ω–æ–ü—Ä–æ–º"', '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ —Ä–æ–±–æ—Ç—ã-–º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä—ã —Å–µ—Ä–∏–∏ –ü–†-3000', '–≥. –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', '2023-11-15', 'active'],
        ['05.089.00.088-2023', '–û–û–û "–ë–∏–æ–¢–µ—Ö –°–∏—Å—Ç–µ–º—ã"', '–ê–ø–ø–∞—Ä–∞—Ç—ã —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –£–ó–ò-–ú–ï–î', '–≥. –ú–æ—Å–∫–≤–∞', '2023-09-30', 'revoked'],
        ['06.012.00.234-2024', '–ó–ê–û "–≠–Ω–µ—Ä–≥–æ–º–∞—à"', '–¢—É—Ä–±–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –ø–∞—Ä–æ–≤—ã–µ –º–æ—â–Ω–æ—Å—Ç—å—é –¥–æ 500 –ú–í—Ç', '–≥. –¢—É–ª–∞', '2024-05-12', 'active'],
        ['07.078.00.345-2024', '–û–û–û "–°–ø–µ—Ü–¢—Ä–∞–Ω—Å"', '–ê–≤—Ç–æ–±—É—Å—ã –≥–æ—Ä–æ–¥—Å–∫–∏–µ –Ω–∏–∑–∫–æ–ø–æ–ª—å–Ω—ã–µ —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞ –ï–≤—Ä–æ-6', '–≥. –ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥', '2024-04-18', 'active'],
        ['08.156.00.567-2023', '–ê–û "–ê–≤–∏–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ"', '–ì–∞–∑–æ—Ç—É—Ä–±–∏–Ω–Ω—ã–µ –¥–≤–∏–≥–∞—Ç–µ–ª–∏ –¥–ª—è –º–∞–ª–æ–π –∞–≤–∏–∞—Ü–∏–∏ –ì–¢–î-117', '–≥. –°–∞–º–∞—Ä–∞', '2023-12-20', 'active'],
        ['09.234.00.789-2024', '–û–û–û "–ù–µ—Ñ—Ç–µ—Ö–∏–º"', '–£—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞—Ç–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Ñ—Ç–∏ –£–ö–ü-1000', '–≥. –£—Ñ–∞', '2024-06-08', 'active'],
        ['10.345.00.901-2024', '–ü–ê–û "–ú–µ—Ç–∞–ª–ª—É—Ä–≥"', '–ü—Ä–æ–∫–∞—Ç–Ω—ã–µ —Å—Ç–∞–Ω—ã —Ö–æ–ª–æ–¥–Ω–æ–π –ø—Ä–æ–∫–∞—Ç–∫–∏ –ª–∏—Å—Ç–æ–≤–æ–≥–æ –º–µ—Ç–∞–ª–ª–∞', '–≥. –ß–µ–ª—è–±–∏–Ω—Å–∫', '2024-07-03', 'active'],
        ['11.456.00.012-2024', '–û–û–û "–¢–µ—Ö–ü–ª–∞—Å—Ç–∏–∫"', '–õ–∏—Ç—å–µ–≤—ã–µ –º–∞—à–∏–Ω—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã—Ö –∏–∑–¥–µ–ª–∏–π –õ–ú-800', '–≥. –ö–∞–∑–∞–Ω—å', '2024-08-25', 'active'],
        ['12.567.00.123-2024', '–ê–û "–°–µ–ª—å—Ö–æ–∑–ú–∞—à"', '–ö–æ–º–±–∞–π–Ω—ã –∑–µ—Ä–Ω–æ—É–±–æ—Ä–æ—á–Ω—ã–µ —Å–∞–º–æ—Ö–æ–¥–Ω—ã–µ –ö–ó–°-1218', '–≥. –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É', '2024-09-10', 'active'],
        ['13.678.00.234-2023', '–û–û–û "–ü—Ä–æ–º–•–∏–º"', '–†–µ–∞–∫—Ç–æ—Ä—ã —Ö–∏–º–∏—á–µ—Å–∫–∏–µ –∏–∑ –Ω–µ—Ä–∂–∞–≤–µ—é—â–µ–π —Å—Ç–∞–ª–∏ –†–•-5000', '–≥. –ü–µ—Ä–º—å', '2023-10-30', 'suspended'],
        ['14.789.00.345-2024', '–ü–ê–û "–°—Ç—Ä–æ–π—Ç–µ—Ö"', '–ö—Ä–∞–Ω—ã –±–∞—à–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å—é 25 —Ç–æ–Ω–Ω', '–≥. –í–æ—Ä–æ–Ω–µ–∂', '2024-11-05', 'active'],
        ['15.890.00.456-2024', '–û–û–û "–≠–Ω–µ—Ä–≥–æ—Å–≤–µ—Ç"', '–°–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–∏ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ IP65', '–≥. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '2024-12-12', 'active'],
        ['16.901.00.567-2023', '–ê–û "–í–æ–¥–æ–ö–∞–Ω–∞–ª"', '–ù–∞—Å–æ—Å—ã —Ü–µ–Ω—Ç—Ä–æ–±–µ–∂–Ω—ã–µ –¥–ª—è –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è –ù–¶–í-200', '–≥. –í–æ–ª–≥–æ–≥—Ä–∞–¥', '2023-08-15', 'active'],
        ['17.012.00.678-2024', '–û–û–û "–ì–∞–∑–ø—Ä–æ–º-–ö–æ–º–ø–ª–µ–∫—Ç"', '–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä—ã –≥–∞–∑–æ–≤—ã–µ –ø–æ—Ä—à–Ω–µ–≤—ã–µ –ö–ì–ü-560', '–≥. –ê—Å—Ç—Ä–∞—Ö–∞–Ω—å', '2024-01-20', 'active'],
        ['18.123.00.789-2024', '–ü–ê–û "–ñ–µ–ª–î–æ—Ä–ú–∞—à"', '–í–∞–≥–æ–Ω—ã –≥—Ä—É–∑–æ–≤—ã–µ –ø–æ–ª—É–≤–∞–≥–æ–Ω—ã –º–æ–¥–µ–ª–∏ 12-9745', '–≥. –¢–≤–µ—Ä—å', '2024-02-28', 'active'],
        ['19.234.00.890-2023', '–û–û–û "–°–ø–µ—Ü–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ"', '–°—Ç–∞–Ω–∫–∏ —Ñ—Ä–µ–∑–µ—Ä–Ω—ã–µ —Å –ß–ü–£ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –§–°-400', '–≥. –ò–∂–µ–≤—Å–∫', '2023-07-22', 'revoked'],
        ['20.345.00.901-2024', '–ê–û "–†–æ—Å–≠–ª–µ–∫—Ç—Ä–æ"', '–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä—ã —Å–∏–ª–æ–≤—ã–µ –º–∞—Å–ª—è–Ω—ã–µ –¢–ú-1000/10', '–≥. –Ø—Ä–æ—Å–ª–∞–≤–ª—å', '2024-10-14', 'active']
    ];
    
    $stmt = $pdo->prepare("
        INSERT INTO registry_entries 
        (conclusion_number, company_name, product_name, region, inclusion_date, status) 
        VALUES (?, ?, ?, ?, ?, ?)
    ");
    
    $count = 0;
    foreach ($sampleData as $row) {
        try {
            $stmt->execute($row);
            $count++;
        } catch(Exception $e) {
            echo "‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤ –∑–∞–ø–∏—Å–∏: " . $e->getMessage() . "<br>";
        }
    }
    
    echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: $count<br>";
    echo "üìä –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ: " . getTotalRecords($pdo) . "<br>";
    echo "üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É<br>";
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Å—á–µ—Ç–∞ –∑–∞–ø–∏—Å–µ–π
function getTotalRecords($pdo) {
    $stmt = $pdo->query("SELECT COUNT(*) FROM registry_entries");
    return $stmt->fetchColumn();
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
loadSampleData($pdo);

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
echo "<br><h3>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–µ—Å—Ç—Ä–∞:</h3>";
$stats = $pdo->query("SELECT status, COUNT(*) as count FROM registry_entries GROUP BY status")->fetchAll();
foreach ($stats as $stat) {
    $statusNames = [
        'active' => '–î–µ–π—Å—Ç–≤—É—é—â–∏–µ',
        'suspended' => '–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 
        'revoked' => '–û—Ç–æ–∑–≤–∞–Ω—ã'
    ];
    $statusName = $statusNames[$stat['status']] ?? $stat['status'];
    echo "‚Ä¢ $statusName: {$stat['count']} –∑–∞–ø–∏—Å–µ–π<br>";
}

// –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É
echo '<br><div style="text-align: center; margin-top: 30px;">';
echo '<a href="registry_table.html" style="background: linear-gradient(45deg, #3498db, #2980b9); color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; font-size: 18px; font-weight: bold; box-shadow: 0 4px 15px rgba(52,152,219,0.3);">üìä –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–µ–µ—Å—Ç—Ä–∞</a>';
echo '</div>';
?>